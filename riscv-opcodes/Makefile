SHELL := /bin/sh

CRYPTO_H := ../encoding.h

CRYPTO_OPCODES := opcodes-crypto

$(CRYPTO_H): $(CRYPTO_OPCODES) parse_opcodes encoding.h
	echo "/*" > $@
	echo " * This file is auto-generated by running 'make $@' in" >> $@
	echo " * https://github.com/riscv/riscv-opcodes (`git log -1 --format="format:%h"`)" >> $@
	echo " */" >> $@
	echo >> $@
	cat encoding.h >> $@
	cat $(CRYPTO_OPCODES) | python ./parse_opcodes -c >> $@

.PHONY : install
